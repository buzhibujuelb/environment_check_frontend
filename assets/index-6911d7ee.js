var Vt=Object.defineProperty;var qt=(_,B,s)=>B in _?Vt(_,B,{enumerable:!0,configurable:!0,writable:!0,value:s}):_[B]=s;var lt=(_,B,s)=>(qt(_,typeof B!="symbol"?B+"":B,s),s);import{D as ht,r as L,aa as Ct,o as st,Q as Ft,R as b,T as p,a4 as rt,u as it,a as Y,b as vt,z as Gt,B as At,c as ct,V as kt,F as yt,ab as Bt,ac as Tt,i as $t,O as _t,ad as Yt}from"./@vue-eae790e7.js";import{E as Qt,a as jt,b as Kt,c as Xt,d as Rt,e as St,f as Pt,g as Dt,h as Zt,i as Jt}from"./element-plus-7b2b0186.js";import{o as te,n as ee,p as ie,s as re}from"./@element-plus-83f864b0.js";import{d as gt,e as oe}from"./@vueuse-64409598.js";import{c as se,a as ae}from"./vue-router-d84b407b.js";import{U as It,S as bt}from"./vue-echarts-27586dce.js";import{u as Et,a as Mt,b as Ut,c as Lt,d as Nt,e as Ot,f as Wt,g as Ht}from"./echarts-b3faa40c.js";import{e as ne,l as le,o as ce,d as xt,t as he,f as de,i as fe}from"./@tensorflow-bf5c3953.js";import"./seedrandom-b2d1a696.js";import{l as wt}from"./lodash-3fad7b8d.js";import"./dayjs-ba359499.js";import"./lodash-es-75f160d5.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./resize-detector-a5205554.js";import"./zrender-6dc8901c.js";import"./tslib-54e39b60.js";import"./long-37f21d67.js";(function(){const B=document.createElement("link").relList;if(B&&B.supports&&B.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))E(v);new MutationObserver(v=>{for(const F of v)if(F.type==="childList")for(const P of F.addedNodes)P.tagName==="LINK"&&P.rel==="modulepreload"&&E(P)}).observe(document,{childList:!0,subtree:!0});function s(v){const F={};return v.integrity&&(F.integrity=v.integrity),v.referrerPolicy&&(F.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?F.credentials="include":v.crossOrigin==="anonymous"?F.credentials="omit":F.credentials="same-origin",F}function E(v){if(v.ep)return;v.ep=!0;const F=s(v);fetch(v.href,F)}})();(function(_){var B=function(){return _.requestAnimationFrame||_.webkitRequestAnimationFrame||_.mozRequestAnimationFrame||function(e){_.setTimeout(e,16.666666666666668)}}(),s=_.jsmpeg=function(e,r){r=r||{},this.benchmark=!!r.benchmark,this.canvas=r.canvas||document.createElement("canvas"),this.autoplay=!!r.autoplay,this.loop=!!r.loop,this.externalLoadCallback=r.onload||null,this.externalDecodeCallback=r.ondecodeframe||null,this.externalFinishedCallback=r.onfinished||null,this.bwFilter=r.bwFilter||!1,this.customIntraQuantMatrix=new Uint8Array(64),this.customNonIntraQuantMatrix=new Uint8Array(64),this.blockData=new Int32Array(64),this.canvasContext=this.canvas.getContext("2d"),e instanceof WebSocket?(this.client=e,this.client.onopen=this.initSocketClient.bind(this)):this.load(e)};s.prototype.waitForIntraFrame=!0,s.prototype.socketBufferSize=512*1024,s.prototype.onlostconnection=null,s.prototype.initSocketClient=function(e){this.buffer=new z(new ArrayBuffer(this.socketBufferSize)),this.nextPictureBuffer=new z(new ArrayBuffer(this.socketBufferSize)),this.nextPictureBuffer.writePos=0,this.nextPictureBuffer.chunkBegin=0,this.nextPictureBuffer.lastWriteBeforeWrap=0,this.client.binaryType="arraybuffer",this.client.onmessage=this.receiveSocketMessage.bind(this)},s.prototype.decodeSocketHeader=function(e){e[0]==E.charCodeAt(0)&&e[1]==E.charCodeAt(1)&&e[2]==E.charCodeAt(2)&&e[3]==E.charCodeAt(3)&&(this.width=e[4]*256+e[5],this.height=e[6]*256+e[7],this.initBuffers())},s.prototype.receiveSocketMessage=function(e){var r=new Uint8Array(e.data);this.sequenceStarted||this.decodeSocketHeader(r);var n=this.buffer,t=this.nextPictureBuffer;t.writePos+r.length>t.length&&(t.lastWriteBeforeWrap=t.writePos,t.writePos=0,t.index=0),t.bytes.set(r,t.writePos),t.writePos+=r.length;for(var a=0;;)if(a=t.findNextMPEGStartCode(),a==z.NOT_FOUND||t.index>>3>t.writePos){t.index=Math.max(t.writePos-3,0)<<3;return}else if(a==at)break;if(this.waitForIntraFrame){t.advance(10),t.getBits(3)==w&&(this.waitForIntraFrame=!1,t.chunkBegin=t.index-13>>3);return}this.currentPictureDecoded||this.decodePicture(v);var o=t.index>>3;if(o>t.chunkBegin)n.bytes.set(t.bytes.subarray(t.chunkBegin,o)),n.writePos=o-t.chunkBegin;else{n.bytes.set(t.bytes.subarray(t.chunkBegin,t.lastWriteBeforeWrap));var l=t.lastWriteBeforeWrap-t.chunkBegin;n.bytes.set(t.bytes.subarray(0,o),l),n.writePos=o+l}n.index=0,t.chunkBegin=o,this.currentPictureDecoded=!1,B(this.scheduleDecoding.bind(this),this.canvas)},s.prototype.scheduleDecoding=function(){this.decodePicture(),this.currentPictureDecoded=!0},s.prototype.isRecording=!1,s.prototype.recorderWaitForIntraFrame=!1,s.prototype.recordedFrames=0,s.prototype.recordedSize=0,s.prototype.didStartRecordingCallback=null,s.prototype.recordBuffers=[],s.prototype.canRecord=function(){return this.client&&this.client.readyState==this.client.OPEN},s.prototype.startRecording=function(e){if(this.canRecord()){this.discardRecordBuffers(),this.isRecording=!0,this.recorderWaitForIntraFrame=!0,this.didStartRecordingCallback=e||null,this.recordedFrames=0,this.recordedSize=0;var r=this.width>>4,n=(this.width&15)<<4|this.height>>8,t=this.height&255;this.recordBuffers.push(new Uint8Array([0,0,1,179,r,n,t,19,255,255,225,88,0,0,1,184,0,8,0,0,0,0,1,0]))}},s.prototype.recordFrameFromCurrentBuffer=function(){if(this.isRecording){if(this.recorderWaitForIntraFrame){if(this.pictureCodingType!=w)return;this.recorderWaitForIntraFrame=!1,this.didStartRecordingCallback&&this.didStartRecordingCallback(this)}this.recordedFrames++,this.recordedSize+=this.buffer.writePos,this.recordBuffers.push(new Uint8Array(this.buffer.bytes.subarray(0,this.buffer.writePos)))}},s.prototype.discardRecordBuffers=function(){this.recordBuffers=[],this.recordedFrames=0},s.prototype.stopRecording=function(){var e=new Blob(this.recordBuffers,{type:"video/mpeg"});return this.discardRecordBuffers(),this.isRecording=!1,e},s.prototype.load=function(e){this.url=e;var r=new XMLHttpRequest,n=this;r.onreadystatechange=function(){r.readyState==r.DONE&&r.status==200&&n.loadCallback(r.response)},r.onprogress=this.updateLoader.bind(this),r.open("GET",e),r.responseType="arraybuffer",r.send()},s.prototype.updateLoader=function(e){var r=e.loaded/e.total,n=this.canvas.width,t=this.canvas.height,a=this.canvasContext;a.fillStyle="#222",a.fillRect(0,0,n,t),a.fillStyle="#fff",a.fillRect(0,t-t*r,n,t*r)},s.prototype.loadCallback=function(e){this.buffer=new z(e),this.findStartCode(H),this.firstSequenceHeader=this.buffer.index,this.decodeSequenceHeader(),this.nextFrame(),this.autoplay&&this.play(),this.externalLoadCallback&&this.externalLoadCallback(this)},s.prototype.play=function(e){this.playing||(this.targetTime=Date.now(),this.playing=!0,this.scheduleNextFrame())},s.prototype.pause=function(e){this.playing=!1},s.prototype.stop=function(e){this.buffer&&(this.buffer.index=this.firstSequenceHeader),this.playing=!1,this.client&&(this.client.close(),this.client=null)},s.prototype.readCode=function(e){var r=0;do r=e[r+this.buffer.getBits(1)];while(r>=0&&e[r]!=0);return e[r+2]},s.prototype.findStartCode=function(e){for(var r=0;;)if(r=this.buffer.findNextMPEGStartCode(),r==e||r==z.NOT_FOUND)return r;return z.NOT_FOUND},s.prototype.fillArray=function(e,r){for(var n=0,t=e.length;n<t;n++)e[n]=r},s.prototype.pictureRate=30,s.prototype.lateTime=0,s.prototype.firstSequenceHeader=0,s.prototype.targetTime=0,s.prototype.nextFrame=function(){if(this.buffer)for(;;){var e=this.buffer.findNextMPEGStartCode();if(e==H)this.decodeSequenceHeader();else{if(e==at)return this.playing&&this.scheduleNextFrame(),this.decodePicture(),this.canvas;if(e==z.NOT_FOUND)return this.stop(),this.externalFinishedCallback&&this.externalFinishedCallback(this),this.loop&&this.sequenceStarted&&this.play(),null}}},s.prototype.scheduleNextFrame=function(){this.lateTime=Date.now()-this.targetTime;var e=Math.max(0,1e3/this.pictureRate-this.lateTime);if(this.targetTime=Date.now()+e,this.benchmark){var r=Date.now();this.benchframe||(this.benchstart=r,this.benchframe=0),this.benchframe++;var n=r-this.benchstart;this.benchframe>=100&&(this.benchfps=this.benchframe/n*1e3,console&&console.log("frames per second: "+this.benchfps),this.benchframe=null),setTimeout(this.nextFrame.bind(this),0)}else e<18?this.scheduleAnimation():setTimeout(this.scheduleAnimation.bind(this),e)},s.prototype.scheduleAnimation=function(){B(this.nextFrame.bind(this),this.canvas)},s.prototype.decodeSequenceHeader=function(){if(this.width=this.buffer.getBits(12),this.height=this.buffer.getBits(12),this.buffer.advance(4),this.pictureRate=F[this.buffer.getBits(4)],this.buffer.advance(18+1+10+1),this.initBuffers(),this.buffer.getBits(1)){for(var e=0;e<64;e++)this.customIntraQuantMatrix[P[e]]=this.buffer.getBits(8);this.intraQuantMatrix=this.customIntraQuantMatrix}if(this.buffer.getBits(1)){for(var e=0;e<64;e++)this.customNonIntraQuantMatrix[P[e]]=this.buffer.getBits(8);this.nonIntraQuantMatrix=this.customNonIntraQuantMatrix}},s.prototype.initBuffers=function(){if(this.intraQuantMatrix=W,this.nonIntraQuantMatrix=q,this.mbWidth=this.width+15>>4,this.mbHeight=this.height+15>>4,this.mbSize=this.mbWidth*this.mbHeight,this.codedWidth=this.mbWidth<<4,this.codedHeight=this.mbHeight<<4,this.codedSize=this.codedWidth*this.codedHeight,this.halfWidth=this.mbWidth<<3,this.halfHeight=this.mbHeight<<3,this.quarterSize=this.codedSize>>2,!this.sequenceStarted){this.sequenceStarted=!0;var e=_.Uint8ClampedArray||_.Uint8Array;_.Uint8ClampedArray||(this.copyBlockToDestination=this.copyBlockToDestinationClamp,this.addBlockToDestination=this.addBlockToDestinationClamp),this.currentY=new e(this.codedSize),this.currentY32=new Uint32Array(this.currentY.buffer),this.currentCr=new e(this.codedSize>>2),this.currentCr32=new Uint32Array(this.currentCr.buffer),this.currentCb=new e(this.codedSize>>2),this.currentCb32=new Uint32Array(this.currentCb.buffer),this.forwardY=new e(this.codedSize),this.forwardY32=new Uint32Array(this.forwardY.buffer),this.forwardCr=new e(this.codedSize>>2),this.forwardCr32=new Uint32Array(this.forwardCr.buffer),this.forwardCb=new e(this.codedSize>>2),this.forwardCb32=new Uint32Array(this.forwardCb.buffer),this.canvas.width=this.width,this.canvas.height=this.height,this.currentRGBA=this.canvasContext.getImageData(0,0,this.width,this.height),this.bwFilter&&(this.currentRGBA32=new Uint32Array(this.currentRGBA.data.buffer)),this.fillArray(this.currentRGBA.data,255)}},s.prototype.currentY=null,s.prototype.currentCr=null,s.prototype.currentCb=null,s.prototype.currentRGBA=null,s.prototype.pictureCodingType=0,s.prototype.forwardY=null,s.prototype.forwardCr=null,s.prototype.forwardCb=null,s.prototype.fullPelForward=!1,s.prototype.forwardFCode=0,s.prototype.forwardRSize=0,s.prototype.forwardF=0,s.prototype.decodePicture=function(e){if(this.buffer.advance(10),this.pictureCodingType=this.buffer.getBits(3),this.buffer.advance(16),!(this.pictureCodingType<=0||this.pictureCodingType>=R)){if(this.pictureCodingType==A){if(this.fullPelForward=this.buffer.getBits(1),this.forwardFCode=this.buffer.getBits(3),this.forwardFCode==0)return;this.forwardRSize=this.forwardFCode-1,this.forwardF=1<<this.forwardRSize}var r=0;do r=this.buffer.findNextMPEGStartCode();while(r==ot||r==pt);for(;r>=X&&r<=nt;)this.decodeSlice(r&255),r=this.buffer.findNextMPEGStartCode();if(this.buffer.rewind(32),this.recordFrameFromCurrentBuffer(),e!=v&&(this.bwFilter?this.YToRGBA():this.YCbCrToRGBA(),this.canvasContext.putImageData(this.currentRGBA,0,0),this.externalDecodeCallback&&this.externalDecodeCallback(this,this.canvas)),this.pictureCodingType==w||this.pictureCodingType==A){var n=this.forwardY,t=this.forwardY32,a=this.forwardCr,o=this.forwardCr32,l=this.forwardCb,u=this.forwardCb32;this.forwardY=this.currentY,this.forwardY32=this.currentY32,this.forwardCr=this.currentCr,this.forwardCr32=this.currentCr32,this.forwardCb=this.currentCb,this.forwardCb32=this.currentCb32,this.currentY=n,this.currentY32=t,this.currentCr=a,this.currentCr32=o,this.currentCb=l,this.currentCb32=u}}},s.prototype.YCbCrToRGBA=function(){for(var e=this.currentY,r=this.currentCb,n=this.currentCr,t=this.currentRGBA.data,a=0,o=this.codedWidth,l=this.codedWidth+(this.codedWidth-this.width),u=0,C=this.halfWidth-(this.width>>1),f=0,x=this.width*4,i=this.width*4,d=this.width>>1,S=this.height>>1,y,U,D,g,h,c,k=0;k<S;k++){for(var N=0;N<d;N++)U=r[u],D=n[u],u++,g=D+(D*103>>8)-179,h=(U*88>>8)-44+(D*183>>8)-91,c=U+(U*198>>8)-227,y=e[a++],t[f]=y+g,t[f+1]=y-h,t[f+2]=y+c,f+=4,y=e[a++],t[f]=y+g,t[f+1]=y-h,t[f+2]=y+c,f+=4,y=e[o++],t[x]=y+g,t[x+1]=y-h,t[x+2]=y+c,x+=4,y=e[o++],t[x]=y+g,t[x+1]=y-h,t[x+2]=y+c,x+=4;a+=l,o+=l,f+=i,x+=i,u+=C}},s.prototype.YToRGBA=function(){for(var e=this.currentY,r=this.currentRGBA32,n=0,t=this.codedWidth-this.width,a=0,o=this.width,l=this.height,u,C=0;C<l;C++){for(var f=0;f<o;f++)u=e[n++],r[a++]=4278190080|u<<16|u<<8|u;n+=t}},s.prototype.quantizerScale=0,s.prototype.sliceBegin=!1,s.prototype.decodeSlice=function(e){for(this.sliceBegin=!0,this.macroblockAddress=(e-1)*this.mbWidth-1,this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0,this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.quantizerScale=this.buffer.getBits(5);this.buffer.getBits(1);)this.buffer.advance(8);do this.decodeMacroblock();while(!this.buffer.nextBytesAreStartCode())},s.prototype.macroblockAddress=0,s.prototype.mbRow=0,s.prototype.mbCol=0,s.prototype.macroblockType=0,s.prototype.macroblockIntra=!1,s.prototype.macroblockMotFw=!1,s.prototype.motionFwH=0,s.prototype.motionFwV=0,s.prototype.motionFwHPrev=0,s.prototype.motionFwVPrev=0,s.prototype.decodeMacroblock=function(){for(var e=0,r=this.readCode($);r==34;)r=this.readCode($);for(;r==35;)e+=33,r=this.readCode($);if(e+=r,this.sliceBegin)this.sliceBegin=!1,this.macroblockAddress+=e;else{if(this.macroblockAddress+e>=this.mbSize)return;for(e>1&&(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.pictureCodingType==A&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0));e>1;)this.macroblockAddress++,this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb),e--;this.macroblockAddress++}this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.macroblockType=this.readCode(mt[this.pictureCodingType]),this.macroblockIntra=this.macroblockType&1,this.macroblockMotFw=this.macroblockType&8,this.macroblockType&16&&(this.quantizerScale=this.buffer.getBits(5)),this.macroblockIntra?(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0):(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.decodeMotionVectors(),this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb));for(var n=this.macroblockType&2?this.readCode(M):this.macroblockIntra?63:0,t=0,a=32;t<6;t++)n&a&&this.decodeBlock(t),a>>=1},s.prototype.decodeMotionVectors=function(){var e,r,n=0;this.macroblockMotFw?(e=this.readCode(K),e!=0&&this.forwardF!=1?(n=this.buffer.getBits(this.forwardRSize),r=(Math.abs(e)-1<<this.forwardRSize)+n+1,e<0&&(r=-r)):r=e,this.motionFwHPrev+=r,this.motionFwHPrev>(this.forwardF<<4)-1?this.motionFwHPrev-=this.forwardF<<5:this.motionFwHPrev<-this.forwardF<<4&&(this.motionFwHPrev+=this.forwardF<<5),this.motionFwH=this.motionFwHPrev,this.fullPelForward&&(this.motionFwH<<=1),e=this.readCode(K),e!=0&&this.forwardF!=1?(n=this.buffer.getBits(this.forwardRSize),r=(Math.abs(e)-1<<this.forwardRSize)+n+1,e<0&&(r=-r)):r=e,this.motionFwVPrev+=r,this.motionFwVPrev>(this.forwardF<<4)-1?this.motionFwVPrev-=this.forwardF<<5:this.motionFwVPrev<-this.forwardF<<4&&(this.motionFwVPrev+=this.forwardF<<5),this.motionFwV=this.motionFwVPrev,this.fullPelForward&&(this.motionFwV<<=1)):this.pictureCodingType==A&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0)},s.prototype.copyMacroblock=function(e,r,n,t,a){var o,l,u,C,f,x,i,d,S,y=this.currentY32,U=this.currentCb32,D=this.currentCr32;o=this.codedWidth,l=o-16,u=e>>1,C=r>>1,f=(e&1)==1,x=(r&1)==1,i=((this.mbRow<<4)+C)*o+(this.mbCol<<4)+u,d=this.mbRow*o+this.mbCol<<2,S=d+(o<<2);var g,h,c;if(f)if(x)for(;d<S;){g=n[i]+n[i+o],i++;for(var k=0;k<4;k++)h=n[i]+n[i+o],i++,c=g+h+2>>2&255,g=n[i]+n[i+o],i++,c|=g+h+2<<6&65280,h=n[i]+n[i+o],i++,c|=g+h+2<<14&16711680,g=n[i]+n[i+o],i++,c|=g+h+2<<22&4278190080,y[d++]=c;d+=l>>2,i+=l-1}else for(;d<S;){g=n[i++];for(var k=0;k<4;k++)h=n[i++],c=g+h+1>>1&255,g=n[i++],c|=g+h+1<<7&65280,h=n[i++],c|=g+h+1<<15&16711680,g=n[i++],c|=g+h+1<<23&4278190080,y[d++]=c;d+=l>>2,i+=l-1}else if(x)for(;d<S;){for(var k=0;k<4;k++)c=n[i]+n[i+o]+1>>1&255,i++,c|=n[i]+n[i+o]+1<<7&65280,i++,c|=n[i]+n[i+o]+1<<15&16711680,i++,c|=n[i]+n[i+o]+1<<23&4278190080,i++,y[d++]=c;d+=l>>2,i+=l}else for(;d<S;){for(var k=0;k<4;k++)c=n[i],i++,c|=n[i]<<8,i++,c|=n[i]<<16,i++,c|=n[i]<<24,i++,y[d++]=c;d+=l>>2,i+=l}if(!this.bwFilter){o=this.halfWidth,l=o-8,u=e/2>>1,C=r/2>>1,f=(e/2&1)==1,x=(r/2&1)==1,i=((this.mbRow<<3)+C)*o+(this.mbCol<<3)+u,d=this.mbRow*o+this.mbCol<<1,S=d+(o<<1);var N,Z,I,V,et,O;if(f)if(x)for(;d<S;){N=t[i]+t[i+o],V=a[i]+a[i+o],i++;for(var k=0;k<2;k++)Z=t[i]+t[i+o],et=a[i]+a[i+o],i++,I=N+Z+2>>2&255,O=V+et+2>>2&255,N=t[i]+t[i+o],V=a[i]+a[i+o],i++,I|=N+Z+2<<6&65280,O|=V+et+2<<6&65280,Z=t[i]+t[i+o],et=a[i]+a[i+o],i++,I|=N+Z+2<<14&16711680,O|=V+et+2<<14&16711680,N=t[i]+t[i+o],V=a[i]+a[i+o],i++,I|=N+Z+2<<22&4278190080,O|=V+et+2<<22&4278190080,D[d]=I,U[d]=O,d++;d+=l>>2,i+=l-1}else for(;d<S;){N=t[i],V=a[i],i++;for(var k=0;k<2;k++)Z=t[i],et=a[i++],I=N+Z+1>>1&255,O=V+et+1>>1&255,N=t[i],V=a[i++],I|=N+Z+1<<7&65280,O|=V+et+1<<7&65280,Z=t[i],et=a[i++],I|=N+Z+1<<15&16711680,O|=V+et+1<<15&16711680,N=t[i],V=a[i++],I|=N+Z+1<<23&4278190080,O|=V+et+1<<23&4278190080,D[d]=I,U[d]=O,d++;d+=l>>2,i+=l-1}else if(x)for(;d<S;){for(var k=0;k<2;k++)I=t[i]+t[i+o]+1>>1&255,O=a[i]+a[i+o]+1>>1&255,i++,I|=t[i]+t[i+o]+1<<7&65280,O|=a[i]+a[i+o]+1<<7&65280,i++,I|=t[i]+t[i+o]+1<<15&16711680,O|=a[i]+a[i+o]+1<<15&16711680,i++,I|=t[i]+t[i+o]+1<<23&4278190080,O|=a[i]+a[i+o]+1<<23&4278190080,i++,D[d]=I,U[d]=O,d++;d+=l>>2,i+=l}else for(;d<S;){for(var k=0;k<2;k++)I=t[i],O=a[i],i++,I|=t[i]<<8,O|=a[i]<<8,i++,I|=t[i]<<16,O|=a[i]<<16,i++,I|=t[i]<<24,O|=a[i]<<24,i++,D[d]=I,U[d]=O,d++;d+=l>>2,i+=l}}},s.prototype.dcPredictorY,s.prototype.dcPredictorCr,s.prototype.dcPredictorCb,s.prototype.blockData=null,s.prototype.decodeBlock=function(e){var r=0,n;if(this.fillArray(this.blockData,0),this.macroblockIntra){var t,a;if(e<4?(t=this.dcPredictorY,a=this.readCode(T)):(t=e==4?this.dcPredictorCr:this.dcPredictorCb,a=this.readCode(J)),a>0){var o=this.buffer.getBits(a);o&1<<a-1?this.blockData[0]=t+o:this.blockData[0]=t+(-1<<a|o+1)}else this.blockData[0]=t;e<4?this.dcPredictorY=this.blockData[0]:e==4?this.dcPredictorCr=this.blockData[0]:this.dcPredictorCb=this.blockData[0],this.blockData[0]<<=3+5,n=this.intraQuantMatrix,r=1}else n=this.nonIntraQuantMatrix;for(var l=0;;){var u=0,C=this.readCode(m);if(C==1&&r>0&&this.buffer.getBits(1)==0)break;C==65535?(u=this.buffer.getBits(6),l=this.buffer.getBits(8),l==0?l=this.buffer.getBits(8):l==128?l=this.buffer.getBits(8)-256:l>128&&(l=l-256)):(u=C>>8,l=C&255,this.buffer.getBits(1)&&(l=-l)),r+=u;var f=P[r];r++,l<<=1,this.macroblockIntra||(l+=l<0?-1:1),l=l*this.quantizerScale*n[f]>>4,l&1||(l-=l>0?1:-1),l>2047?l=2047:l<-2048&&(l=-2048),this.blockData[f]=l*G[f]}r==1?this.fillArray(this.blockData,this.blockData[0]+128>>8):this.IDCT();var x,i,d;e<4?(x=this.currentY,d=this.codedWidth-8,i=this.mbRow*this.codedWidth+this.mbCol<<4,e&1&&(i+=8),e&2&&(i+=this.codedWidth<<3)):(x=e==4?this.currentCb:this.currentCr,d=(this.codedWidth>>1)-8,i=(this.mbRow*this.codedWidth<<2)+(this.mbCol<<3)),r=0,this.blockData,this.macroblockIntra?this.copyBlockToDestination(this.blockData,x,i,d):this.addBlockToDestination(this.blockData,x,i,d)},s.prototype.copyBlockToDestination=function(e,r,n,t){for(var a=0,o=0;o<8;o++){for(var l=0;l<8;l++)r[n++]=e[a++];n+=t}},s.prototype.addBlockToDestination=function(e,r,n,t){for(var a=0,o=0;o<8;o++){for(var l=0;l<8;l++)r[n++]+=e[a++];n+=t}},s.prototype.copyBlockToDestinationClamp=function(e,r,n,t){for(var a=0,o=0;o<8;o++){for(var l=0;l<8;l++){var u=e[a++];r[n++]=u>255?255:u<0?0:u}n+=t}},s.prototype.addBlockToDestinationClamp=function(e,r,n,t){for(var a=0,o=0;o<8;o++){for(var l=0;l<8;l++){var u=e[a++]+r[n];r[n++]=u>255?255:u<0?0:u}n+=t}},s.prototype.IDCT=function(){var e,r,n,t,a,o,l,u,C,f,x,i,d,S,y,U,D,g,h,c=this.blockData;for(h=0;h<8;++h)e=c[4*8+h],r=c[2*8+h]+c[6*8+h],n=c[5*8+h]-c[3*8+h],o=c[1*8+h]+c[7*8+h],l=c[3*8+h]+c[5*8+h],t=c[1*8+h]-c[7*8+h],a=o+l,u=c[0*8+h],d=(t*473-n*196+128>>8)-a,C=d-((o-l)*362+128>>8),f=u-e,x=((c[2*8+h]-c[6*8+h])*362+128>>8)-r,i=u+e,S=f+x,y=i+r,U=f-x,D=i-r,g=-C-(n*473+t*196+128>>8),c[0*8+h]=a+y,c[1*8+h]=d+S,c[2*8+h]=U-C,c[3*8+h]=D-g,c[4*8+h]=D+g,c[5*8+h]=C+U,c[6*8+h]=S-d,c[7*8+h]=y-a;for(h=0;h<64;h+=8)e=c[4+h],r=c[2+h]+c[6+h],n=c[5+h]-c[3+h],o=c[1+h]+c[7+h],l=c[3+h]+c[5+h],t=c[1+h]-c[7+h],a=o+l,u=c[0+h],d=(t*473-n*196+128>>8)-a,C=d-((o-l)*362+128>>8),f=u-e,x=((c[2+h]-c[6+h])*362+128>>8)-r,i=u+e,S=f+x,y=i+r,U=f-x,D=i-r,g=-C-(n*473+t*196+128>>8),c[0+h]=a+y+128>>8,c[1+h]=d+S+128>>8,c[2+h]=U-C+128>>8,c[3+h]=D-g+128>>8,c[4+h]=D+g+128>>8,c[5+h]=C+U+128>>8,c[6+h]=S-d+128>>8,c[7+h]=y-a+128>>8};var E="jsmp",v=1,F=[0,23.976,24,25,29.97,30,50,59.94,60,0,0,0,0,0,0,0],P=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),W=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]),q=new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),G=new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]),$=new Int16Array([1*3,2*3,0,3*3,4*3,0,0,0,1,5*3,6*3,0,7*3,8*3,0,9*3,10*3,0,11*3,12*3,0,0,0,3,0,0,2,13*3,14*3,0,15*3,16*3,0,0,0,5,0,0,4,17*3,18*3,0,19*3,20*3,0,0,0,7,0,0,6,21*3,22*3,0,23*3,24*3,0,25*3,26*3,0,27*3,28*3,0,-1,29*3,0,-1,30*3,0,31*3,32*3,0,33*3,34*3,0,35*3,36*3,0,37*3,38*3,0,0,0,9,0,0,8,39*3,40*3,0,41*3,42*3,0,43*3,44*3,0,45*3,46*3,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,47*3,-1,0,-1,48*3,0,49*3,50*3,0,51*3,52*3,0,53*3,54*3,0,55*3,56*3,0,57*3,58*3,0,59*3,60*3,0,61*3,-1,0,-1,62*3,0,63*3,64*3,0,65*3,66*3,0,67*3,68*3,0,69*3,70*3,0,71*3,72*3,0,73*3,74*3,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22]),tt=new Int8Array([1*3,2*3,0,-1,3*3,0,0,0,1,0,0,17]),Q=new Int8Array([1*3,2*3,0,3*3,4*3,0,0,0,10,5*3,6*3,0,0,0,2,7*3,8*3,0,0,0,8,9*3,10*3,0,11*3,12*3,0,-1,13*3,0,0,0,18,0,0,26,0,0,1,0,0,17]),j=new Int8Array([1*3,2*3,0,3*3,5*3,0,4*3,6*3,0,8*3,7*3,0,0,0,12,9*3,10*3,0,0,0,14,13*3,14*3,0,12*3,11*3,0,0,0,4,0,0,6,18*3,16*3,0,15*3,17*3,0,0,0,8,0,0,10,-1,19*3,0,0,0,1,20*3,21*3,0,0,0,30,0,0,17,0,0,22,0,0,26]),M=new Int16Array([2*3,1*3,0,3*3,6*3,0,4*3,5*3,0,8*3,11*3,0,12*3,13*3,0,9*3,7*3,0,10*3,14*3,0,20*3,19*3,0,18*3,16*3,0,23*3,17*3,0,27*3,25*3,0,21*3,28*3,0,15*3,22*3,0,24*3,26*3,0,0,0,60,35*3,40*3,0,44*3,48*3,0,38*3,36*3,0,42*3,47*3,0,29*3,31*3,0,39*3,32*3,0,0,0,32,45*3,46*3,0,33*3,41*3,0,43*3,34*3,0,0,0,4,30*3,37*3,0,0,0,8,0,0,16,0,0,44,50*3,56*3,0,0,0,28,0,0,52,0,0,62,61*3,59*3,0,52*3,60*3,0,0,0,1,55*3,54*3,0,0,0,61,0,0,56,57*3,58*3,0,0,0,2,0,0,40,51*3,62*3,0,0,0,48,64*3,63*3,0,49*3,53*3,0,0,0,20,0,0,12,80*3,83*3,0,0,0,63,77*3,75*3,0,65*3,73*3,0,84*3,66*3,0,0,0,24,0,0,36,0,0,3,69*3,87*3,0,81*3,79*3,0,68*3,71*3,0,70*3,78*3,0,67*3,76*3,0,72*3,74*3,0,86*3,85*3,0,88*3,82*3,0,-1,94*3,0,95*3,97*3,0,0,0,33,0,0,9,106*3,110*3,0,102*3,116*3,0,0,0,5,0,0,10,93*3,89*3,0,0,0,6,0,0,18,0,0,17,0,0,34,113*3,119*3,0,103*3,104*3,0,90*3,92*3,0,109*3,107*3,0,117*3,118*3,0,101*3,99*3,0,98*3,96*3,0,100*3,91*3,0,114*3,115*3,0,105*3,108*3,0,112*3,111*3,0,121*3,125*3,0,0,0,41,0,0,14,0,0,21,124*3,122*3,0,120*3,123*3,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31]),K=new Int16Array([1*3,2*3,0,4*3,3*3,0,0,0,0,6*3,5*3,0,8*3,7*3,0,0,0,-1,0,0,1,9*3,10*3,0,12*3,11*3,0,0,0,2,0,0,-2,14*3,15*3,0,16*3,13*3,0,20*3,18*3,0,0,0,3,0,0,-3,17*3,19*3,0,-1,23*3,0,27*3,25*3,0,26*3,21*3,0,24*3,22*3,0,32*3,28*3,0,29*3,31*3,0,-1,33*3,0,36*3,35*3,0,0,0,-4,30*3,34*3,0,0,0,4,0,0,-7,0,0,5,37*3,41*3,0,0,0,-5,0,0,7,38*3,40*3,0,42*3,39*3,0,0,0,-6,0,0,6,51*3,54*3,0,50*3,49*3,0,45*3,46*3,0,52*3,47*3,0,43*3,53*3,0,44*3,48*3,0,0,0,10,0,0,9,0,0,8,0,0,-8,57*3,66*3,0,0,0,-9,60*3,64*3,0,56*3,61*3,0,55*3,62*3,0,58*3,63*3,0,0,0,-10,59*3,65*3,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]),T=new Int8Array([2*3,1*3,0,6*3,5*3,0,3*3,4*3,0,0,0,1,0,0,2,9*3,8*3,0,7*3,10*3,0,0,0,0,12*3,11*3,0,0,0,4,0,0,3,13*3,14*3,0,0,0,5,0,0,6,16*3,15*3,0,17*3,-1,0,0,0,7,0,0,8]),J=new Int8Array([2*3,1*3,0,4*3,3*3,0,6*3,5*3,0,8*3,7*3,0,0,0,2,0,0,1,0,0,0,10*3,9*3,0,0,0,3,12*3,11*3,0,0,0,4,14*3,13*3,0,0,0,5,16*3,15*3,0,0,0,6,17*3,-1,0,0,0,7,0,0,8]),m=new Int32Array([1*3,2*3,0,4*3,3*3,0,0,0,1,7*3,8*3,0,6*3,5*3,0,13*3,9*3,0,11*3,10*3,0,14*3,12*3,0,0,0,257,20*3,22*3,0,18*3,21*3,0,16*3,19*3,0,0,0,513,17*3,15*3,0,0,0,2,0,0,3,27*3,25*3,0,29*3,31*3,0,24*3,26*3,0,32*3,30*3,0,0,0,1025,23*3,28*3,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,37*3,36*3,0,0,0,1281,35*3,34*3,0,39*3,38*3,0,33*3,42*3,0,40*3,41*3,0,52*3,50*3,0,54*3,53*3,0,48*3,49*3,0,43*3,45*3,0,46*3,44*3,0,0,0,2049,0,0,4,0,0,514,0,0,2305,51*3,47*3,0,55*3,57*3,0,60*3,56*3,0,59*3,58*3,0,61*3,62*3,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,76*3,75*3,0,67*3,70*3,0,73*3,71*3,0,78*3,74*3,0,72*3,77*3,0,69*3,64*3,0,68*3,63*3,0,66*3,65*3,0,81*3,87*3,0,91*3,80*3,0,82*3,79*3,0,83*3,86*3,0,93*3,92*3,0,84*3,85*3,0,90*3,94*3,0,88*3,89*3,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,105*3,107*3,0,111*3,114*3,0,104*3,97*3,0,125*3,119*3,0,96*3,98*3,0,-1,123*3,0,95*3,101*3,0,106*3,121*3,0,99*3,102*3,0,113*3,103*3,0,112*3,116*3,0,110*3,100*3,0,124*3,115*3,0,117*3,122*3,0,109*3,118*3,0,120*3,108*3,0,127*3,136*3,0,139*3,140*3,0,130*3,126*3,0,145*3,146*3,0,128*3,129*3,0,0,0,2050,132*3,134*3,0,155*3,154*3,0,0,0,8,137*3,133*3,0,143*3,144*3,0,151*3,138*3,0,142*3,141*3,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,0,0,1794,0,0,4353,0,0,4609,0,0,4865,148*3,152*3,0,0,0,1027,153*3,150*3,0,0,0,261,131*3,135*3,0,0,0,516,149*3,147*3,0,172*3,173*3,0,162*3,158*3,0,170*3,161*3,0,168*3,166*3,0,157*3,179*3,0,169*3,167*3,0,174*3,171*3,0,178*3,177*3,0,156*3,159*3,0,164*3,165*3,0,183*3,182*3,0,175*3,176*3,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,180*3,181*3,0,160*3,163*3,0,196*3,199*3,0,0,0,27,203*3,185*3,0,202*3,201*3,0,0,0,19,0,0,22,197*3,207*3,0,0,0,18,191*3,192*3,0,188*3,190*3,0,0,0,20,184*3,194*3,0,0,0,21,186*3,193*3,0,0,0,23,204*3,198*3,0,0,0,25,0,0,24,200*3,205*3,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,189*3,206*3,0,187*3,195*3,0,218*3,211*3,0,0,0,37,215*3,216*3,0,0,0,36,210*3,212*3,0,0,0,34,213*3,209*3,0,221*3,222*3,0,219*3,208*3,0,217*3,214*3,0,223*3,220*3,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]),w=1,A=2,R=3,H=179,X=1,nt=175,at=0,ot=181,pt=178,mt=[null,tt,Q,j],z=function(e){this.bytes=new Uint8Array(e),this.length=this.bytes.length,this.writePos=this.bytes.length,this.index=0};z.NOT_FOUND=-1,z.prototype.findNextMPEGStartCode=function(){for(var e=this.index+7>>3;e<this.writePos;e++)if(this.bytes[e]==0&&this.bytes[e+1]==0&&this.bytes[e+2]==1)return this.index=e+4<<3,this.bytes[e+3];return this.index=this.writePos<<3,z.NOT_FOUND},z.prototype.nextBytesAreStartCode=function(){var e=this.index+7>>3;return e>=this.writePos||this.bytes[e]==0&&this.bytes[e+1]==0&&this.bytes[e+2]==1},z.prototype.nextBits=function(e){var r=this.index>>3,n=8-this.index%8;if(n>=e)return this.bytes[r]>>n-e&255>>8-e;var t=(this.index+e)%8,a=this.index+e-1>>3,o=this.bytes[r]&255>>8-n;for(r++;r<a;r++)o<<=8,o|=this.bytes[r];return t>0?(o<<=t,o|=this.bytes[r]>>8-t):(o<<=8,o|=this.bytes[r]),o},z.prototype.getBits=function(e){var r=this.nextBits(e);return this.index+=e,r},z.prototype.advance=function(e){return this.index+=e},z.prototype.rewind=function(e){return this.index-=e}})(window);const ue=gt(),pe=oe(ue),me=Y("button",{class:"border-none w-full bg-transparent cursor-pointer",style:{height:"var(--ep-menu-item-height)"}},[Y("i",{"inline-flex":"",i:"dark:ep-moon ep-sunny"})],-1),xe=ht({__name:"BaseSide",setup(_){const B=L(!0),s=(v,F)=>{console.log(v,F)},E=(v,F)=>{console.log(v,F)};return(v,F)=>{const P=Qt,W=jt,q=Ct("router-link"),G=Kt;return st(),Ft(G,{"default-active":"2",class:"el-menu-vertical-demo",collapse:B.value,onOpen:s,onClose:E},{default:b(()=>[p(q,{to:"/"},{default:b(()=>[p(W,{index:"2"},{title:b(()=>[rt("仪表盘")]),default:b(()=>[p(P,null,{default:b(()=>[p(it(te))]),_:1})]),_:1})]),_:1}),p(q,{to:"/detect"},{default:b(()=>[p(W,{index:"3"},{title:b(()=>[rt("火焰检测")]),default:b(()=>[p(P,null,{default:b(()=>[p(it(ee))]),_:1})]),_:1})]),_:1}),p(q,{to:"/Operation"},{default:b(()=>[p(W,{index:"4"},{title:b(()=>[rt("传感器")]),default:b(()=>[p(P,null,{default:b(()=>[p(it(ie))]),_:1})]),_:1})]),_:1}),p(W,{index:"5",disabled:""},{title:b(()=>[rt("设置")]),default:b(()=>[p(P,null,{default:b(()=>[p(it(re))]),_:1})]),_:1}),p(W,{onClick:F[0]||(F[0]=$=>it(pe)())},{default:b(()=>[me]),_:1})]),_:1},8,["collapse"])}}}),be=ht({__name:"BaseHeader",setup(_){return(B,s)=>null}});const dt=(_,B)=>{const s=_.__vccOpts||_;for(const[E,v]of B)s[E]=v;return s},ve={},ye={class:"flex main-container"};function ge(_,B){const s=be,E=xe,v=Ct("router-view"),F=Xt;return st(),Ft(F,{namespace:"ep"},{default:b(()=>[p(s),Y("div",ye,[p(E),Y("div",null,[p(v)])])]),_:1})}const _e=dt(ve,[["render",ge]]),ft=_=>(Bt("data-v-fdd3578b"),_=_(),Tt(),_),we={color:"$ep-color-primary"},Ce=ft(()=>Y("canvas",{id:"videoCanvas",width:"640",height:"480"},null,-1)),Fe=ft(()=>Y("br",null,null,-1)),Ae=ft(()=>Y("br",null,null,-1)),ke=ft(()=>Y("br",null,null,-1)),Be=20,Te=ht({__name:"dashboard",props:{msg:{}},setup(_){Et([Mt,Ut,Lt,Nt,Ot,Wt,Ht]);const B=location.hostname==="envchk.20021123.xyz"?"pi.20021123.xyz":location.hostname,s=(location.protocol==="https:"?"wss://":"ws://")+B,E=location.protocol==="https:"?9e3:8084,v=B,F=location.protocol==="https:"?5002:5001;vt(()=>{var M=document.getElementById("videoCanvas"),K=new WebSocket(s+":"+E);new jsmpeg(K,{canvas:M}),$(q,"sensor1"),$(G,"sensor2")}),Gt(()=>{clearInterval(tt)});var P=L("light");At(It,P);var W=L("rgba(0,0,0,0)");gt({onChanged(M){P.value=M?"dark":""}});let q=L([]),G=L([]);function $(M,K){fetch("//"+v+":"+F+"/"+K).then(T=>T.json()).then(T=>{let J=Math.min(Be,T.length);T=T.slice(-J);for(let m=0;m<J;m++)(M.value.length<J||M.value[J-1][0]<T[m][0]*1e3)&&(M.value.length==J&&M.value.shift(),M.value.push([T[m][0]*1e3,T[m][1],T[m][2]]))}).catch(function(T){console.log("error: "+T.toString())})}const tt=setInterval(function(){$(q,"sensor1"),$(G,"sensor2")},1e3);var Q=L({title:{text:"ENS210",subtext:"温湿度传感器",left:"center"},backgroundColor:W,legend:{orient:"vertical",left:"100",data:["温度","湿度"]},dataset:{source:q,dimensions:["timestamp","temp","humi"]},xAxis:{type:"time",axisLabel:{interval:0,rotate:45}},yAxis:[{type:"value",scale:!0,name:"°C"},{type:"value",scale:!0,name:"%rh"}],tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#283b56"}}},series:[{name:"温度",type:"line",smooth:!0,yAxisIndex:0,encode:{x:"timestamp",y:"temp"}},{name:"湿度",type:"line",smooth:!0,yAxisIndex:1,encode:{x:"timestamp",y:"humi"}}]}),j=L({title:{text:"LTR390UV",subtext:"光照传感器",left:"center"},notMerge:!0,backgroundColor:W,legend:{orient:"vertical",left:"100",data:["ALS","Lux"]},dataset:{source:G,dimensions:["timestamp","als","lux"]},xAxis:{type:"time",axisLabel:{interval:0,rotate:45}},yAxis:[{type:"value",scale:!0},{type:"value",scale:!0}],tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#283b56"}}},series:[{name:"ALS",type:"line",smooth:!0,yAxisIndex:0,encode:{x:"timestamp",y:"als"}},{name:"Lux",type:"line",smooth:!0,yAxisIndex:1,encode:{x:"timestamp",y:"lux"}}]});return(M,K)=>{const T=Rt,J=St;return st(),ct(yt,null,[Y("h1",we,kt(M.msg),1),p(T,null,{default:b(()=>[Ce]),_:1}),Fe,Ae,ke,p(T,null,{default:b(()=>[p(J,{wrap:"",style:{"min-height":"1px"}},{default:b(()=>[p(it(bt),{class:"chart",option:it(Q)},null,8,["option"]),p(it(bt),{class:"chart",option:it(j)},null,8,["option"])]),_:1})]),_:1})],64)}}});const Re=dt(Te,[["__scopeId","data-v-fdd3578b"]]),Se=200,Pe=ht({__name:"Operation",setup(_){Et([Mt,Ut,Lt,Nt,Ot,Wt,Ht]);const s=location.hostname==="envchk.20021123.xyz"?"pi.20021123.xyz":location.hostname,E=location.protocol==="https:"?5002:5001;vt(()=>{q(P,"sensor1"),q(W,"sensor2")});var v=L("light");At(It,v);var F=L("rgba(0,0,0,0)");gt({onChanged(m){v.value=m?"dark":""}});let P=L([]),W=L([]);function q(m,w){fetch("//"+s+":"+E+"/"+w).then(A=>A.json()).then(A=>{let R=Math.min(Se,A.length);A=A.slice(-R);for(let H=0;H<R;H++)(m.value.length<R||m.value[R-1][0]<A[H][0]*1e3)&&(m.value.length==R&&m.value.shift(),m.value.push([A[H][0]*1e3,A[H][1],A[H][2]]))}).catch(function(A){console.log("error: "+A.toString())})}function G(m,w,A){if(!A||!A[0]){q(m,w);return}console.log(A),fetch("//"+s+":"+E+"/"+w+"?start="+parseInt(A[0].getTime()/1e3)+"&end="+parseInt(A[1].getTime()/1e3)).then(R=>R.json()).then(R=>{let H=R.length;m.value.splice(0,m.value.length),R=R.slice(-H);for(let X=0;X<H;X++)(m.value.length<H||m.value[H-1][0]<R[X][0]*1e3)&&(m.value.length==H&&m.value.shift(),m.value.push([R[X][0]*1e3,R[X][1],R[X][2]]))}).catch(function(R){console.log("error: "+R.toString())})}var $={title:{text:"ENS210",subtext:"温湿度传感器",left:"center",top:10},backgroundColor:F,legend:{orient:"vertical",left:"150",data:["温度","湿度"],top:10},dataset:{source:P,dimensions:["timestamp","temp","humi"]},xAxis:{type:"time",axisLabel:{interval:0,rotate:45}},yAxis:[{type:"value",scale:!0,name:"°C"},{type:"value",scale:!0,name:"%rh"}],tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#283b56"}}},series:[{name:"温度",type:"line",smooth:!0,yAxisIndex:0,encode:{x:"timestamp",y:"temp"}},{name:"湿度",type:"line",smooth:!0,yAxisIndex:1,encode:{x:"timestamp",y:"humi"}}]},tt={title:{text:"LTR390UV",subtext:"光照传感器",left:"center"},notMerge:!0,backgroundColor:F,legend:{orient:"vertical",left:"100",data:["ALS","Lux"]},dataset:{source:W,dimensions:["timestamp","als","lux"]},xAxis:{type:"time",axisLabel:{interval:0,rotate:45}},yAxis:[{type:"value",scale:!0},{type:"value",scale:!0}],tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#283b56"}}},series:[{name:"ALS",type:"line",smooth:!0,yAxisIndex:0,encode:{x:"timestamp",y:"als"}},{name:"Lux",type:"line",smooth:!0,yAxisIndex:1,encode:{x:"timestamp",y:"lux"}}]},Q=L($),j=L(0);const M=()=>{console.log("time changed"),j.value==0?G(P,"sensor1",T.value):G(W,"sensor2",T.value)},K=()=>{console.log("chart changed"),j.value==0?(Q.value=$,G(P,"sensor1",T.value)):(Q.value=tt,G(W,"sensor2",T.value))},T=L([]),J=[{text:"Last minute",value:()=>{const m=new Date,w=new Date;return w.setTime(w.getTime()-60*1e3),[w,m]}},{text:"Last hour",value:()=>{const m=new Date,w=new Date;return w.setTime(w.getTime()-3600*1e3),[w,m]}},{text:"Last day",value:()=>{const m=new Date,w=new Date;return w.setTime(w.getTime()-3600*1e3*24),[w,m]}},{text:"Last week",value:()=>{const m=new Date,w=new Date;return w.setTime(w.getTime()-3600*1e3*24*7),[w,m]}}];return(m,w)=>{const A=St,R=Pt,H=Dt,X=Zt,nt=Jt,at=Rt;return st(),ct(yt,null,[p(A,{wrap:"",style:{"min-height":"1px"}},{default:b(()=>[p(it(bt),{class:"chart",option:it(Q)},null,8,["option"])]),_:1}),p(at,null,{default:b(()=>[p(X,{span:8},{default:b(()=>[p(H,{modelValue:it(j),"onUpdate:modelValue":w[0]||(w[0]=ot=>$t(j)?j.value=ot:j=ot),onChange:K,class:"ml-4"},{default:b(()=>[p(R,{label:"0",size:"large"},{default:b(()=>[rt("ENS210")]),_:1}),p(R,{label:"1",disabled:"",size:"large"},{default:b(()=>[rt("ENS160")]),_:1}),p(R,{label:"2",size:"large"},{default:b(()=>[rt("LTR390UV")]),_:1})]),_:1},8,["modelValue"])]),_:1}),p(X,{span:8},{default:b(()=>[p(nt,{class:"datepick",modelValue:T.value,"onUpdate:modelValue":w[1]||(w[1]=ot=>T.value=ot),type:"datetimerange","range-separator":"To",shortcuts:J,onChange:M,"start-placeholder":"Start date","end-placeholder":"End date"},null,8,["modelValue"])]),_:1})]),_:1})],64)}}});const De=dt(Pe,[["__scopeId","data-v-8c810408"]]),Ie=[["person","bicycle","car","motorcycle","airplane","bus","train","truck","boat","traffic light","fire hydrant","stop sign","parking meter","bench","bird","cat","dog","horse","sheep","cow","elephant","bear","zebra","giraffe","backpack","umbrella","handbag","tie","suitcase","frisbee","skis","snowboard","sports ball","kite","baseball bat","baseball glove","skateboard","surfboard","tennis racket","bottle","wine glass","cup","fork","knife","spoon","bowl","banana","apple","sandwich","orange","broccoli","carrot","hot dog","pizza","donut","cake","chair","couch","potted plant","bed","dining table","toilet","tv","laptop","mouse","remote","keyboard","cell phone","microwave","oven","toaster","sink","refrigerator","book","clock","vase","scissors","teddy bear","hair drier","toothbrush"],["fire"]],ut=_=>(Bt("data-v-dc34bf52"),_=_(),Tt(),_),Ee={key:0},Me={key:1},Ue={class:"resultFrame"},Le=ut(()=>Y("canvas",{id:"videoCanvas",width:"640",height:"480"},null,-1)),Ne=ut(()=>Y("br",null,null,-1)),Oe=ut(()=>Y("br",null,null,-1)),We=ut(()=>Y("br",null,null,-1)),He={class:"butdiv"},ze=.2,Ve=ht({__name:"detect",setup(_){const B=location.hostname==="envchk.20021123.xyz"?"pi.20021123.xyz":location.hostname,s=location.hostname;var E;const v=(location.protocol==="https:"?"wss://":"ws://")+B,F=location.protocol==="https:"?9e3:8084;var P,W;const q=L(!1),G=L(!1),$=L("");var tt;const Q=L(),j=L(),M=L(0),K=L(0),T=()=>K.value==0?"yolov5n":"fire",J=()=>"//"+s+`/${T()}_web_model/model.json`,m=()=>{console.log("close webcam");const t=Q.value.src;Q.value.srcObject=null,URL.revokeObjectURL(t),q.value=!1,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then(a=>{a.getTracks().forEach(function(o){o.readyState=="live"&&o.stop()})}),Q.value.value=""},w=()=>{console.log("close rasp stream");var t=document.getElementById("videoCanvas");wt.isNull(t)||(t.style.display="none",W.close())};var A=!1;const R=()=>{cancelAnimationFrame(E),r()},H=async()=>{const t=j.value.getContext("2d");t.clearRect(0,0,t.canvas.width,t.canvas.height),console.log("ctx="),console.log(t),ot().then(()=>{R()})},X=()=>{const t=j.value.getContext("2d");t.clearRect(0,0,t.canvas.width,t.canvas.height),console.log("ctx="),console.log(t),M.value==0?(A?m():A=!0,nt()):(A?w():A=!0,at()),R()};vt(()=>{n(),X(),ne().set("WEBGL_DELETE_TEXTURE_THRESHOLD",256e6)});const nt=()=>{console.log("init rasp stream");var t=document.getElementById("videoCanvas");wt.isNull(t)||(t.style.display="",W=new WebSocket(v+":"+F),P=new jsmpeg(W,{canvas:t}))},at=()=>(console.log("init webcam"),Q.value.style.display="",navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then(t=>{let a=Q.value;try{a.srcObject=t}catch(o){console.log("qwq webcam stream",o)}return new Promise((o,l)=>{a.onloadedmetadata=()=>{console.log("webcam stream initialized"),q.value=!0,o()}})}).catch(t=>{throw console.log("failed to initialize webcam stream",t),t}):Promise.reject(new Error("Your browser does not support mediaDevices.getUserMedia API"))),ot=()=>(G.value=!1,console.log("load model ["+T()+"]"),le(J()).then(t=>{tt=t,G.value=!0,console.log("Model loaded: ",tt)}).catch(t=>{throw console.log("Failed to load the model",t),t})),pt=(t,a,o)=>{let l,u;return[he(()=>{const f=de(t),[x,i]=f.shape.slice(0,2),d=Math.max(i,x),S=f.pad([[0,d-x],[0,d-i],[0,0]]);return l=d/i,u=d/x,fe.resizeBilinear(S,[a,o]).div(255).expandDims(0)}),l,u]},mt=(t,a,o,l,u,C)=>{const f=t.getContext("2d");f.clearRect(0,0,f.canvas.width,f.canvas.height);const x=new z,i=`${Math.max(Math.round(Math.max(f.canvas.width,f.canvas.height)/40),14)}px Arial`;f.font=i,f.textBaseline="top";for(let d=0;d<l.length;++d)if(l[d]>a){const S=Ie[K.value][u[d]],y=x.get(u[d]),U=(l[d]*100).toFixed(1);let[D,g,h,c]=o.slice(d*4,(d+1)*4);D*=t.width*C[0],h*=t.width*C[0],g*=t.height*C[1],c*=t.height*C[1];const k=h-D,N=c-g;f.fillStyle=z.hexToRgba(y,.2),f.fillRect(D,g,k,N),f.strokeStyle=y,f.lineWidth=Math.max(Math.min(f.canvas.width,f.canvas.height)/200,2.5),f.strokeRect(D,g,k,N),f.fillStyle=y;const Z=f.measureText(S+" - "+U+"%").width,I=parseInt(i,10),V=g-(I+f.lineWidth);f.fillRect(D-1,V<0?0:V,Z+f.lineWidth,I+f.lineWidth),f.fillStyle="#ffffff",f.fillText(S+" - "+U+"%",D-1,V<0?0:V)}};class z{constructor(){lt(this,"palette");lt(this,"n");lt(this,"get",a=>this.palette[Math.floor(a)%this.n]);this.palette=["#FF3838","#FF9D97","#FF701F","#FFB21D","#CFD231","#48F90A","#92CC17","#3DDB86","#1A9334","#00D4BB","#2C99A8","#00C2FF","#344593","#6473FF","#0018EC","#8438FF","#520085","#CB38FF","#FF95C8","#FF37C7"],this.n=this.palette.length}}lt(z,"hexToRgba",(a,o)=>{var l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return l?`rgba(${[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)].join(", ")}, ${o})`:null});const e=async()=>{const t=ce(tt.inputs[0].shape),a=await tt.executeAsync(t);xt(a),xt(t)},r=async()=>{if(!G.value)return;if(M.value==1&&!q.value){requestAnimationFrame(r);return}var t=tt.inputs[0].shape;const[a,o]=t.slice(1,3),[l,u,C]=pt(M.value==0?P.canvas:Q.value,a,o);try{await tt.executeAsync(l).then(f=>{const[x,i,d]=f.slice(0,3),S=x.dataSync(),y=i.dataSync(),U=d.dataSync();mt(j.value,ze,S,y,U,[u,C]),xt(f)}).catch(f=>{throw console.log("Run detect failed ",f),f})}catch(f){throw console.log("Run detect failed 2",f),f}E=requestAnimationFrame(r)},n=()=>{ot().then(()=>{e(),r()}).catch(t=>{console.log("Failed to init stream and/or model: ",t),$.value=t})};return(t,a)=>{const o=Pt,l=Dt;return st(),ct(yt,null,[!G.value&&!$.value?(st(),ct("h3",Ee,"loading model ...")):_t("",!0),$.value?(st(),ct("h3",Me,"Failed to init stream and/or model - "+kt($.value),1)):_t("",!0),Y("div",Ue,[Le,Y("video",{ref_key:"videoRef",ref:Q,autoplay:""},null,512),Y("canvas",{ref_key:"canvasRef",ref:j,width:"640",height:"480"},null,512)]),Ne,Oe,We,Y("div",He,[p(l,{modelValue:M.value,"onUpdate:modelValue":a[0]||(a[0]=u=>M.value=u),onChange:X,class:"ml-4"},{default:b(()=>[p(o,{label:"0",size:"large"},{default:b(()=>[rt("树莓派")]),_:1}),p(o,{label:"1",size:"large"},{default:b(()=>[rt("webcam")]),_:1})]),_:1},8,["modelValue"]),p(l,{modelValue:K.value,"onUpdate:modelValue":a[1]||(a[1]=u=>K.value=u),onChange:H,class:"ml-4"},{default:b(()=>[p(o,{label:"0",size:"large"},{default:b(()=>[rt("yolov5n")]),_:1}),p(o,{label:"1",size:"large"},{default:b(()=>[rt("fire_detect")]),_:1})]),_:1},8,["modelValue"])])],64)}}});const qe=dt(Ve,[["__scopeId","data-v-dc34bf52"]]),Ge=[{path:"/",component:Re,name:"dashboard",props:{msg:"环境资源监测"}},{path:"/Operation",component:De,name:"Operation"},{path:"/detect",component:qe,name:"detect"}],$e=se({history:ae(),routes:Ge,scrollBehavior:()=>({left:0,top:0})});const zt=Yt(_e);zt.use($e);zt.mount("#app");
